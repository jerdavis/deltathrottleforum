<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>The Delta Throttle &bull; View topic - Alternatives to potentiometers - hall sensors, etc</title>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" />
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>The Delta Throttle</h1>
		<p><br /><a href="http://deltathrottle.com/forums/">http://deltathrottle.com/forums/</a></p>

		<h2>Alternatives to potentiometers - hall sensors, etc</h2>
		<p><a href="http://deltathrottle.com/forums/viewtopic.php?f=4&amp;t=122">http://deltathrottle.com/forums/viewtopic.php?f=4&amp;t=122</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>1</strong> of <strong>4</strong></div>
		
			<div class="post">
				<h3>Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Apr 23, 2015 4:31 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content">A few of us have been talking about experimenting with different sensors on the pivot arms. I've been considering several different types of hall sensors from simple 3 wire ratiometric sensors to more complicated rotary/angle encoders. SC-Maik is working on a design using a similar 3 wire sensor, and zdayton was discussing using a angular encoder.<br /><br />I was hoping we could centralize this discussion here rather than in various posts across our different build threads.<br /><br />For those wanting to try out similar builds, one option would be ordering samples. Some manufacturers offer limited free samples, you just need to register on their site.<br /><br />I requested samples from AMS. You can request 3 of each of 3 different products per month for free for sample purposes. Here's the listing page. <!-- m --><a class="postlink" href="http://ams.com/eng/Products/Position-Se">http://ams.com/eng/Products/Position-Se</a><!-- m --> ... on-Sensors<br /><br />I'll have a couple of TSSOP-14 and SOIC-8 chips to test with. I'll need to go back over the data sheets and see which I'm more interested in working with. This one in particular is interesting - <!-- m --><a class="postlink" href="http://ams.com/eng/Products/Position-Se">http://ams.com/eng/Products/Position-Se</a><!-- m --> ... ors/AS5600<br /><br />That chip provides a linear analog output of 0-360 degrees, but that range can be programmed to a user specified range, either a full 360 degrees, 180, 90 or 45 degrees. The 90 degree range would be more than enough movement for a pivot arm. I think that'd provide enough accuracy and be fairly easy to implement. It's also a less expensive component when it comes time to buy.<br /><br />It's worth noting that they also have magnets and interesting hall effect joystick modules that might make for a good hat switch. If you don't want to experiment with different sensors you could get 3 of the sensor you want to use, 3 magnets, and a couple joystick modules.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Apr 24, 2015 7:50 pm</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">Will this <a href="https://www.sparkfun.com/products/494" class="postlink">adapter</a> work with AS5600?<br /><br /><img src="https://cdn.sparkfun.com//assets/parts/2/9/8/00494-01.jpg" alt="Image" /><br /><br />Or even better this <a href="http://www.ebay.co.uk/itm/251742367108" class="postlink">one</a><br /><br /><img src="http://i.ebayimg.com/00/s/MTIwMFgxMjAw/z/r4wAAOSw8cNUUom6/$_57.JPG" alt="Image" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Apr 24, 2015 8:12 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content">Probably? It's an SOIC-8 chip, so I don't see why not. Something with some mounting holes would be nice, but nice finds! Decent price points too.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri Apr 24, 2015 8:17 pm</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">I will center it and mount it using <a href="https://www.sparkfun.com/products/8809" class="postlink">round protoboard</a><br /><br /><img src="https://cdn.sparkfun.com//assets/parts/2/0/5/6/08809-01.jpg" alt="Image" /><br /><br /><br /><span style="font-weight: bold">Edit:</span> Can't be centered with this protoboard... 9x9 vs 4x4 <img src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Apr 27, 2015 7:22 am</strong></div>
				<div class="author">by <strong>zdayton</strong></div>
				<div class="content">I ordered some boards to mount my sensors on and some stuff from mcmaster to build a new throttle with magnetic sensors.  The boards I got from OSH Park, i got 6 small boards for $13 shipped.  I will also be testing the new pivot arm design and magnet placement.  I will upload results soonish.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Mon Apr 27, 2015 11:03 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content">All of my samples from AMS showed up today. Talk about fast! I'll need to source or make some sample boards now and see if I can get these tiny components mounted. <br /><br />Did you do a custom board with Osh Park or pick up something off the shelf?</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Apr 28, 2015 1:51 am</strong></div>
				<div class="author">by <strong>zdayton</strong></div>
				<div class="content">I did a custom board. It went to fab today and should be done may 9 I think, hopefully sooner</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue Apr 28, 2015 4:48 am</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content"><blockquote><div><cite>jeruw wrote:</cite>All of my samples from AMS showed up today. Talk about fast! I'll need to source or make some sample boards now and see if I can get these tiny components mounted. <br /><br />Did you do a custom board with Osh Park or pick up something off the shelf?</div></blockquote><br /><br />Ams samples arrived as well and yes they are pretty fast. <br />I am waiting an AMS adapter board from Digikey by April 30 to start testing, before making custom boards.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed Apr 29, 2015 6:59 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content">I ordered some test boards from ebay last night for both the SOIC-8 chips from Analog Devices and AMS and some 14 pin boards for a couple other AMS chips I have for testing. Unfortunate that there aren't better options with mounting holes out there off the shelf. I'll need to figure out how to design a board I guess.<br /><br />In addition to the AS5600 samples I got some 6mm x 2.5mm diametric magnets from AMS.<br /><br />Have you put any thought into how you'll wire up and program the AS5600? I wondered if it'd make sense to write in a calibration routine of some kind. Some button sequence that would enter calibration mode where you'd set the start and end position. Enter program mode, pull up or take the weight off the Delta, click a button and it sets 0. Push down and click a button and it sets the end point. Click again to exit the program mode.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu Apr 30, 2015 5:28 am</strong></div>
				<div class="author">by <strong>Nemesisghost</strong></div>
				<div class="content"><blockquote><div><cite>jeruw wrote:</cite>Have you put any thought into how you'll wire up and program the AS5600? I wondered if it'd make sense to write in a calibration routine of some kind. Some button sequence that would enter calibration mode where you'd set the start and end position. Enter program mode, pull up or take the weight off the Delta, click a button and it sets 0. Push down and click a button and it sets the end point. Click again to exit the program mode.</div></blockquote><br /><br />Have you looked at my interrupt addition?  Mine turns the throttle &quot;off&quot; locking the axis output to 0, when I turn it back on it runs the initialization method.  Here's <a href="http://www.arduino.cc/en/Reference/AttachInterrupt" class="postlink">the Arduino reference</a> to setting up &amp; using interrupts.<br /><br />You could utilize a similar interrupt setup to switch states, one being normal operation &amp; another would be for calibration.  The benefits of using interrupts is that unless the micro-controller is busy with another interrupt, the interrupt's method will always fire meaning that you don't have to listen &amp; possibly miss the mode switch.  Interrupts do add complexity.  You want to keep the interrupt methods small &amp; simple, as they will prevent other interrupt methods from interrupts from running.  This is especially a problem if you are using something like I2C.  That is why you want to use the interrupts to set different modes &amp; then continue to do all the heavy lifting in the Loop method.<br /><br />The Pro Micro has 5 pins tied to interrupts, 4 are also special hook up pins(I2C &amp; Serial Bus).  I2C is good if you need to expand the number of pins or hook up special boards, but for our purposes we don't need the Serial Bus.  Which leaves 3 interrupts we can easily use.  This allows us to have either 4 single button modes or 8 multi-button modes.  That should be more than plenty to have a calibration mode, an &quot;off&quot; mode &amp; a normal running mode.</div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>1</strong> of <strong>4</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>