<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-gb" xml:lang="en-gb">
<head>

<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta http-equiv="content-style-type" content="text/css" />
<meta http-equiv="content-language" content="en-gb" />
<meta http-equiv="imagetoolbar" content="no" />
<meta name="resource-type" content="document" />
<meta name="distribution" content="global" />
<meta name="keywords" content="" />
<meta name="description" content="" />
<meta name="robots" content="noindex" />

<title>The Delta Throttle &bull; View topic - Alternatives to potentiometers - hall sensors, etc</title>

<link href="styles/prosilver/theme/print.css" rel="stylesheet" type="text/css" />
</head>

<body id="phpbb">
<div id="wrap">
	<a id="top" name="top" accesskey="t"></a>

	<div id="page-header">
		<h1>The Delta Throttle</h1>
		<p><br /><a href="http://deltathrottle.com/forums/">http://deltathrottle.com/forums/</a></p>

		<h2>Alternatives to potentiometers - hall sensors, etc</h2>
		<p><a href="http://deltathrottle.com/forums/viewtopic.php?f=4&amp;t=122">http://deltathrottle.com/forums/viewtopic.php?f=4&amp;t=122</a></p>
	</div>

	<div id="page-body">
		<div class="page-number">Page <strong>3</strong> of <strong>4</strong></div>
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed May 13, 2015 4:12 am</strong></div>
				<div class="author">by <strong>mike43110</strong></div>
				<div class="content">Seeing that they do work, maybe i2c would be the way to go.<br /><br />Already realised I am going to need a digital io extender so i2c means minimal cabling.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Wed May 13, 2015 6:00 am</strong></div>
				<div class="author">by <strong>mike43110</strong></div>
				<div class="content">I need to throw a wrench into the i2c plan...<br />We will need multiplexers for i2c as the AS5601 (note, the 5600 does have i2c ONLY for programming from my understanding of their datasheet) has a fixed address...<br /><!-- m --><a class="postlink" href="http://za.mouser.com/ProductDetail/Texas-Instruments/TCA9544APWR/?qs=%2fha2pyFaduhf8FrnqaifFBJ7QzWJ6fQ4wuBz9QykAYc%3d">http://za.mouser.com/ProductDetail/Texa ... 9QykAYc%3d</a><!-- m --><br />Is one such multiplexer at a reasonable price. Once the multiplexer is in place however then up to 4 AS5601s can be used. There isn't an address pin on the AS5601 annoyingly.<br /><br />Another thing that should be looked at is:<br /><!-- m --><a class="postlink" href="http://ams.com/eng/content/view/download/327375">http://ams.com/eng/content/view/download/327375</a><!-- m --><br />The magnet selection guide.<br />From what I read from there a 6mm to 8mm diameter magnet would be preferable with 8mm as most preferable due to the fact that the larger diameter helps with misalignment.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Thu May 14, 2015 5:20 am</strong></div>
				<div class="author">by <strong>zdayton</strong></div>
				<div class="content"><blockquote><div><cite>SC-Maik wrote:</cite>What kind of connector are you going to use to mount the boards?</div></blockquote><br /><br />Jst-ph series. Although for testing I don't want to crimp anything so I'm just going to solder the wires to the pads.  By the way I'm going to be traveling for work for the next 10 days so you won't be seeing any progress from me <img src="images/smilies/icon_e_sad.gif" alt=":(" title="Sad" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue May 19, 2015 1:00 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content"><blockquote><div><cite>SC-Maik wrote:</cite>I was damn wrong and I had to find that out the hard way...<br /><br />You can program AS5600 on 3 wire more only ONCE, the first time you plug it in with PGO enabled.<br /></div></blockquote><br /><br />Actually, I think we should just use 3 wire mode. I've been reading further after mike43110's comments on needing a switch to talk to more than one chip on i2c. Even with i2c you can only run burn_angle 3 times and burn_settings only once. So there's not a big benefit to i2c over 3 wire from a programming perspective other than you get to do it slightly more than once. Plus you have the drawback of having to have a switch IC and the more complicated arduino programming to support it all.<br /><br />Maybe it'd be worth having optional pinouts for connecting i2c for reprogramming, but just rely on 3 wire for all active function?<br /><br />If not, I think I want to just order up some of your board design <img src="images/smilies/icon_e_smile.gif" alt=":)" title="Smile" /></div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue May 19, 2015 1:51 pm</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">I believe that we don't have to program it at all.<br /><br />We just have to physically calibrate magnets once in <span style="font-weight: bold">around</span> 2.5 Volts (180 degress out of full 360) while in rest position using arduino serial monitor. Then we can use 90-270 range.<br /><br />All magnets/AS5600s don't even have to be calibrated at the same values. Every time you plug in throttle, board reads current values and sets starting position for x/y/z. So you can have for example A0=2.5V, A1=2.42V, A2=2,25V and get away with it. Those will be the starting points anyway. If we have to recalibrate it for any reason, we can just unplug/replug the throttle.<br /><br />I will upload my board design for you in a couple of hours.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue May 19, 2015 3:28 pm</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">Board files added</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Tue May 19, 2015 4:35 pm</strong></div>
				<div class="author">by <strong>jeruw</strong></div>
				<div class="content">Awesome, thanks! Just ordered 6 of them from OSHPark. Their pricing puts them at $5.05 per set of 3.<br /><br />I had to rename the files for their submission guidelines. Here's a zip with the renamed files.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri May 22, 2015 6:01 am</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">I've soldered all boards and tonight I am picking up last parts to make my throttle functional.<br /><br />Can't wait to compare pots with hall sensors (and bearings). I will update you later.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Fri May 22, 2015 7:36 pm</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">10x times better response than pots. Smoother, more linear and more accurate!<br /><br />Forgive me, but I am really tired. I will give more details tomorrow. <br />I have to fine tune/ align sensors and don't have the patience atm.</div>
			</div>
			<hr />
		
			<div class="post">
				<h3>Re: Alternatives to potentiometers - hall sensors, etc</h3>
				<div class="date"><img src="styles/prosilver/imageset/icon_post_target.gif" width="11" height="9" alt="Post" title="Post" />Posted: <strong>Sat May 23, 2015 10:00 am</strong></div>
				<div class="author">by <strong>SC-Maik</strong></div>
				<div class="content">I've used Arduino's sample sketch &quot;AnalogReadSerial&quot; to align magnets to sensors one by one.<br /><br /><dl class="codebox"><dt>Code: <a href="viewtopic.php@f=4&amp;t=122&amp;start=20&amp;sid=2da7d3261aa1b35db93cfc0fa069564e&amp;view=print.html#" onclick="selectCode(this); return false;">Select all</a></dt><dd><code>&nbsp; // read the input on analog pin 0:<br />&nbsp; int sensorValue = analogRead(A0);<br />&nbsp; // print out the value you read:<br />&nbsp; Serial.println(sensorValue);</code></dd></dl><br /><br />While pressing first pivot arm all the way down, I've rotated magnet shaft until I was reading 0 on serial monitor.<br /><br />Changed sensorValue to (A1), uploaded sketch again and repeated process for second pivot arm. Change to (A2) for last pivot arm.<br /><br />When done, upload Delta Throttle sketch (I've changed &quot;deadzone&quot; to 0). Unplug throttle, put weight on handle while replugging throttle. Run windows joystick calibration.<br /><br />Load Star Citizen<br /><br />Remapped throttle<br /><br />Strafe Up/ Down = Z-Axis (Input 2)<br />Strafe Left/ Right = X-Axis (Input 2)<br />Strafe Forward/ Back = Y-Axis (Input 2)<br /><br />Changed curve values<br /><br />Strafe Up/ Down = 2<br />Strafe Left/ Right = 1.8<br />Strafe Forward/ Back = 1.2<br /><br />Set Z Axis deadzone to 15%<br /><br />and played some Drone Simulations. <br /><br />Just <span style="font-weight: bold">WOW!!!</span></div>
			</div>
			<hr />
		
	</div>

	<div id="page-footer">
		<div class="page-number">All times are UTC <br />Page <strong>3</strong> of <strong>4</strong></div>
		<div class="copyright">Powered by phpBB&reg; Forum Software &copy; phpBB Group<br />https://www.phpbb.com/</div>
	</div>
</div>

</body>
</html>